# Makefile pour projet Symfony + Docker

# Lancer les conteneurs en arrière-plan avec build
up:
	cd docker && docker compose up -d --build

# Arrêter les conteneurs
down:
	cd docker && docker compose down

# Redémarrer proprement en supprimant les volumes (base de données etc.)
reset:
	cd docker && docker compose down -v
	cd docker && docker compose up -d --build

# Installer les dépendances PHP
composer-install:
	docker exec -it symfony_web composer install

# Lancer les migrations
migrate:
	docker exec -it symfony_web php bin/console doctrine:migrations:migrate

# Créer la base de données
db-create:
	docker exec -it symfony_web php bin/console doctrine:database:create

# Installer les dépendances JS
yarn-install:
	yarn install

# Compiler les assets en prod
build:
	yarn build

# Lancer le dev-server Webpack Encore
dev-server:
	yarn dev-server

# Accès bash dans le conteneur Symfony
bash:
	docker exec -it symfony_web bash

# Exécuter les tests PHPUnit
test:
	docker exec -it symfony_web php bin/phpunit